# Roteiro 1 – Escaneamento de Portas

## Objetivo

Desenvolver uma aplicação que realize o escaneamento de portas de comunicação de um destino por meio de técnicas de escaneamento de portas de rede.

**Carga horária:** Aproximadamente 4 horas  
**Prazo para entrega:** xx/xx/2025

---

## Antes de começarmos...

Os desafios deste roteiro serão conduzidos em vários momentos por meio de imagens de máquinas virtuais que deverão ser executadas com o player gratuito [VirtualBox](https://www.virtualbox.org/).

As ferramentas e scripts para a execução dos testes poderão ser instaladas no sistema operacional pessoal ou executadas por meio de outra máquina virtual com a distribuição [Kali Linux](https://www.kali.org/downloads/).

!!! tip "Dica"
    Este roteiro é organizado em atividades individuais. Atenção às datas dos entregáveis.

---

## Disclaimer

!!! warning
    A disciplina **Tecnologias Hacker** proporciona aos alunos a experiência de testar e explorar ambientes computacionais por meio de ferramentas e scripts reais, **exclusivamente para fins educacionais**.  
Essas técnicas **não devem** ser utilizadas fora do ambiente controlado sem autorização expressa do responsável pelo sistema ou rede.

---

## Getting Started

O termo _Hacker_ é muitas vezes interpretado de forma equivocada.  
No contexto da informática, **Hacker** é a pessoa que analisa, questiona, modifica e testa limites de arquitetura e segurança de dispositivos e softwares.

Já o **Cracker** aplica esse conhecimento com intenção maliciosa.  
Um Hacker pode contribuir para a evolução tecnológica, desenvolver e melhorar sistemas, além de compartilhar conhecimento em segurança.

Pentest é o processo de analisar o nível de segurança de um sistema ou rede sob a perspectiva de um invasor, simulando ataques reais para identificar riscos e falhas.

> “A simulação de ataques reais para avaliar os riscos associados a potenciais brechas de segurança.” — _Georgia Weidman_

Uma metodologia ajuda a organizar o processo, permitindo conhecer:

- Localização do alvo
- Endereço IP
- Sistema operacional
- Serviços em execução
- Versões dos softwares

---

## Metodologias de Pentest

### NIST SP 800-115

Tem como objetivo orientar no planejamento tanto na aplicação quanto na análise dos testes. Esta metodologia especifica como as diferentes técnicas devem ser utilizadas para que os testes sejam efetuados com precisão. É considerada um dos melhores documentos e é a mais adotada por profissionais e consultorias de segurança.

Ela é dividida em 7 etapas:

1. **Visão geral dos exames:** focada em 3 métodos teste, exame e entrevista.
2. **Revisão de técnicas:** esta parte discute as técnicas utilizadas para descobrir as vulnerabilidades utilizando exames passivos.
3. **Identificação de serviços e portas:** tem como objetivo identificar serviços em atividade (e suas portas utilizadas) para verificar possíveis vulnerabilidades.
4. **Validação de vulnerabilidades:** utiliza os dados obtidos na sessão anterior para explorar a existencia de possíveis vulnerabilidades.
5. **Planejamento das avaliações:** abordagem da melhor orientação para que possa ser criada as políticas de testes.
6. **Execução:** neste ponto são destacados pontos chaves na fase de execução onde são fornecidas recomendações referente a avaliação.
7. **Atividades pós-testes:** na etapa final são fornecidas para a organização, maneiras de transformar as descobertas em formas de segurança, assim fornecendo ações contra as vulnerabilidades encontradas.

Esta metodologia não é tão detalhada no ponto de vista técnico como as demais, mas fornece informações suficientes para a realização de um teste de penetração.

Para mais informações leia a [documentação oficial](https://csrc.nist.gov/pubs/sp/800/115/final?).

### ISSAF

Proposta pelo **OISSG** (Open Information Systems Security Group), é a mais volumosa metodologia disponível e divide-se em:

1. **Planejamento e preparação:** fase onde são trocadas informações iniciais para planejamento e preparação dos testes para avaliação do sistema.
2. **Avaliação:** realiação da coleta de informações, mapeamento de rede, identificação de vulnerabilidades no sistema, ou seja, o Pentest analisa todo o sistema que está sendo avaliado e corrige os problemas detectados.
3. **Relatórios e limpeza:** na fase final é apresentado o relatório de todos os testes executados, mas se algum erro ou vulnerabilidade foram encontrados durante os testes, devem ser avisados antes do término da avaliação do sistema e geração dos relatórios.

Esta medotologia abrange:

- Segurança de Rede
- Segurança de Host
- Segurança de Aplicação
- Segurança de Banco de Dados

### OSSTMM (Open Source Security Testing Methodology Manual)

Proposta pela **ISECOM** (Institute for Security and Open Methodologies). Suas definições são constituídas a partir do escopo, que representa todo o ambiente de segurança operacional possível para qualquer interação com qualquer ativo. O principal objetivo dessa metodologia é caracterizar a segurança operacional através dos exames e correlação dos resultados dos testes de uma maneira consistente. 

Os canais de interação OSSTMM são:

- Humano
- Físico
- Wireless
- Telecomunicações
- Rede de dados

### OWASP (Open Web Application Security Project)

Documentação oficial [OWASP](https://owasp.org/www-project-web-security-testing-guide/).

Esta metodologia tem um foco maior em aplicações web.

O OWASP segue alguns princípios para a execução dos testes: não acreditar em milagres, pensar estrategicamente, testar cedo e com regularidade, entender o escopo da segurança, desenvolver a mentalidade correta, entender o objetivo, usar as ferramentas corretas, atentar-se aos detalhes e documentar os resultados.

O OWASP disponibiliza diversos materiais para o desenvolvimento seguro de aplicações e orientações para mitigar vulnerabilidades. Seu documento é organizado em 12 categorias para o teste de penetração:

1. Introdução e objetivos
2. Coleta de informações
3. Teste de configuração
4. Teste de identidade
5. Teste de autenticação
6. Teste de autorização
7. Teste de sessão
8. Validação de entrada
9. Manipulação de erros
10. Criptografia
11. Lógica de negócios
12. Teste do lado cliente

Estes testes podem ser realizados por diferentes maneiras:

- **Caixa Branca:** Em que o hacker conhece bem as características do sistema (sistemas, equipamentos, protocolos, etc.).
- **Caixa Cinza:** Em que se possui informações de partes do ambiente a ser explorado.
- **Caixa Preta:** Em que não é fornecido nenhuma informação do ambiente alvo.

---

## Introdução ao Escaneamento de Portas

As ferramentas de escaneamento permitem a descoberta de vulnerabilidades em ambientes computacionais, entre outras funcionalidades. Os escaneadores estão disponíveis como ferramentas especializadas projetadas apenas para “escanear” vulnerabilidades em um host, como por exemplo determinar se suas portas de comunicação estão sendo ou não usadas. São extremamente úteis no processo de descoberta e reconhecimento do alvo em um PENTEST, bem como, para a administração de ambientes computacionais. Muitas portas estão associadas a serviços específicos de rede. Para isso, é fundamental o conhecimento sobre sockets e dos protocolos de transporte, bem como, suas características como cabeçalho e flags.

Existem basicamente três tipos de escaneamento:



- **Port scan:** detecta portas abertas
- **Network scan:** identifica hosts ativos
- **Vulnerability scan:** busca falhas conhecidas

Neste roteiro vamos trabalhar com o port scanner. Port scanner é a técnica mais popular e usada por Hackers/Crackers para descobrir serviços vulneráveis em um sistema e o NMAP a mais popular das ferramentas.

Ferramenta popular: **Nmap**

---

## Preparação do Ambiente

### Configuração no VirtualBox

1. **Instalar Kali Linux**
2. **Configurar adaptador em modo _Bridge_:** Isso permitirá que o Kali receba um endereço IP na mesma faixa da rede do sistema operacional hospedeiro.
3. **Verificar IP do Kali com:**

```bash
ip a
```

Este comando listará os adaptadores de rede e seus respectivos endereços IP. Anote o IP atribuído à interface de rede principal (normalmente eth0 ou wlan0).

Agora, no sistema operacional hospedeiro, abra o terminal ou prompt de comando e verifique o seu próprio IP.

- Windows (CMD ou Powershell): **ipconfig**
- GNU/Linux/Mac OS: **ifconfig ou ip a**

**4\. Testar conectividade:**

Antes de realizar o escaneamento de portas, garanta que o Kali consegue alcançar a máquina hospedeira usando o comando:

```bash
ping IP_DA_MAQUINA_HOSPEDEIRA
```

**Lembre-se de desabilitar o firewall, para o caso do Windows ser seu sistema operacional**.

---

## Nmap

!!! info "Nota sobre o uso do Nmap"
    A descrição detalhada do funcionamento e dos comandos do **Nmap** foi movida para a seção [**Ferramentas**](../ferramentas/nmap.md) deste material, com o objetivo de centralizar as instruções e guias de utilização em um único local, facilitando futuras consultas e atualizações.  

    O **Nmap** será uma ferramenta fundamental neste roteiro e continuará a ser utilizada ao longo de todo o semestre em diferentes atividades e desafios.  

    Aqui, ele será mencionado apenas como recurso necessário para a execução das tarefas, e seu uso prático deverá seguir as orientações presentes na seção [**Ferramentas**](../ferramentas/nmap.md).



---

## Tarefa – Desenvolvimento de um Port Scanner

### Descrição

Desenvolvimento de uma aplicação que realize o escaneamento de portas de comunicação de um destino por meio de bibliotecas (libs) de desenvolvimento Python.

### Requisitos

Você deverá realizar uma pesquisa dos módulos e bibliotecas que permitem o desenvolvimento de uma ferramenta para o escaneamento de portas TCP de acordo com as premissas a seguir:

- Desenvolver em **Python**
- Interface amigável (1 ponto)
- Permitir o escaneamento de um host ou uma rede (1 ponto)
- Permitir inserir o range (intervalo) de portas a serem escaneadas (1 ponto)
- Além da função de escaneamento, espera-se que seu código relacione as portas _Well-Known_ e seus serviços associados e apresente em sua saída (imprimir) o número da porta e o nome do serviço associado. (2 pontos)
- Detecção de estado das portas (1 ponto)
- Escaneamento UDP (2 pontos)
- Banner grabbing para SO (2 pontos)
- Suporte a IPv6 (2 pontos)

!!! tip "Dica"
    Observe que o roteiro pode alcançar até 12 pontos, ou seja, você pode fazer a seleção de funções até atingir os 10 pontos.

!!! warning 
    Pontos adicionais não serão acumulados para os próximos roteiros.

---


